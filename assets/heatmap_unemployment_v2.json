{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Heatmap of Unemployment Rate by State (v2)",
  "data": { "url": "data/merged_labour_data.csv" },
  "width": "container",
  "height": 480,
  "params": [
    { "name": "periodFilter", "value": "All" },
    { "name": "stateFilter", "value": "All" }
  ],
  "mark": "rect",
  "encoding": {
    "x": {
      "field": "Year_Quarter",
      "type": "ordinal",
      "title": "Period",
      "axis": { "labelAngle": 0, "labelFontSize": 12, "labelAlign": "center" }
    },
    "y": { "field": "State", "type": "nominal", "title": "State", "axis": { "labelFontSize": 11 } },
    "color": {
      "field": "Unemployment_Rate",
      "type": "quantitative",
      "title": "Unemployment (%)",
      "scale": { "range": ["#ffffff","#fff5eb","#fee6ce","#fdd0a2","#fd8d3c","#f16913","#a63603"], "domain": [2.5, 6] },
      "legend": { "orient": "right", "titleFontSize": 12, "labelFontSize": 11 }
    },
    "tooltip": [
      { "field": "State", "type": "nominal", "title": "State" },
      { "field": "Year_Quarter", "type": "ordinal", "title": "Period" },
      { "field": "Unemployment_Rate", "type": "quantitative", "title": "Unemp %", "format": ".1f" }
    ]
  },
  "transform": [
    { "filter": "params.periodFilter.value == 'All' || datum.Year_Quarter == params.periodFilter.value" },
    { "filter": "params.stateFilter.value == 'All' || datum.State == params.stateFilter.value" }
  ],
  "config": { "view": { "stroke": "transparent" } }
}
