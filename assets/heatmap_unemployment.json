{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Interactive Heatmap of Unemployment Rate by State",
  "data": { "url": "data/merged_labour_data.csv" },
  "width": "container",
  "height": 480,
  "params": [
    { "name": "periodFilter", "value": "All" },
    { "name": "stateFilter", "value": "All" }
  ],
  "mark": "rect",
  "encoding": {
    "x": { 
      "field": "Year_Quarter", 
      "type": "ordinal", 
      "title": "Period", 
      "axis": { "labelAngle": 0, "labelFontSize": 12, "labelAlign": "center" }
    },
    "y": { 
      "field": "State", 
      "type": "nominal", 
      "title": "State", 
      "axis": { "labelFontSize": 11 } 
    },
    "color": {
      "field": "Unemployment_Rate",
      "type": "quantitative",
      "title": "Unemployment (%)",
      "scale": { 
        "range": ["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801"], 
        "domain": [2.5, 6] 
      },
      "legend": { "orient": "right", "titleFontSize": 12, "labelFontSize": 11 }
    },
    "tooltip": [ 
      { "field": "State", "type": "nominal", "title": "State" }, 
      { "field": "Year_Quarter", "type": "ordinal", "title": "Period" }, 
      { "field": "Unemployment_Rate", "type": "quantitative", "title": "Unemp %", "format": ".1f" } 
    ]
  },
  "transform": [
    { "filter": "datum.Year_Quarter == periodFilter || periodFilter == 'All'" },
    { "filter": "datum.State == stateFilter || stateFilter == 'All'" }
  ],
  "config": { "view": { "stroke": "transparent" } }
}
